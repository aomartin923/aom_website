[
  {
    "path": "posts/2022-03-12-project3/",
    "title": "Linear Regression",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Ali Martin",
        "url": {}
      }
    ],
    "date": "2022-03-12",
    "categories": [],
    "contents": "\nOverview:\nI will be using data from Lightfood and Whitford sampled by pitfall traps at Jornada Basin LTER (New Mexico) site to estimate parameters of the snout to vent length to weight model on lizard populations. We first fit this model on all species of lizards in the study, and highlighted a subset of the data that only fits the model on male Western Whiptail lizard species (Cnemidophorus tigrisatus).\nNLS Model\nSnout-to-Vent-Length (SVL) to Weight (W) model:\n\\[\nW = a(SVL)^b\n\\]\nPart 1: Length to Weight Model\n\n\nlizards <- read_csv(here(\"data\",\"lizard.csv\")) %>% \n  mutate(log_length =log(SV_length),\n         log_weight = log(weight)) %>% \n  clean_names() %>% drop_na()\n\n\n\n\n\n#estimate parameters from coefficients\nparameters <- lm(log_weight ~ log_length, data = lizards)\n\n\n\n\n\nlizard_coeff <- coef(parameters) \n\n\n\n\n\n#create function\nlizard_model <- function(a, sv_length, b){\n  weight = a*sv_length^b\n  return(weight)\n}\n\n# perform non linear regression using purrr\n\nlizard_nls <- nls(weight ~ lizard_model(a, sv_length, b),\n                     data = lizards,\n                     start = list(b= lizard_coeff[2],\n                                  a = exp(lizard_coeff[1])))\n\n\n\nPart 2: Present Fitted Model on a Table\n\n\n# create table \nlizard_nls_tidy <- tidy(lizard_nls) \n  \nlizard_nls_tidy$p.value <- ifelse(lizard_nls_tidy$p.value < .001, paste(\"< .001\"))\n\nlizard_nls_tidy%>% \n kable(col.names = c(\"Parameter\",\n                     \"Estimate\",\n                     \"Standard Error\",\n                     \"Statistic\",\n                     \"P-Value\"), digits = 5, caption = \"Table 1: The table shows the predicted parameters of the Non Linear Regression Model.\") %>% \n  kable_classic(full_width = FALSE)\n\n\n\nTable 1: Table 1: The table shows the predicted parameters of the Non Linear Regression Model.\n\n\nParameter\n\n\nEstimate\n\n\nStandard Error\n\n\nStatistic\n\n\nP-Value\n\n\nb\n\n\n2.45321\n\n\n0.02698\n\n\n90.93001\n\n\n< .001\n\n\na\n\n\n0.00034\n\n\n0.00004\n\n\n8.53842\n\n\n< .001\n\n\nThe coefficient for a is 3^{-4} while the coefficient for b is 2.4532\n\n\n# generate predictions from data\n\nmodel_prediction <- augment(lizard_nls)\n\n\n#plot predictions by sex\nggplot(data = lizards,\n       aes(x =sv_length,\n           y = weight,\n           color = sex))+\n  geom_jitter(size = 1)+\n  scale_color_manual(values = c('plum1','lightblue1', \"grey58\")) +\n  #include NLS line\n  geom_line(data = model_prediction,\n            aes(x= sv_length,\n                y = .fitted,\n                color = \"NLS Model\")) +\n  theme_minimal()+\n  labs(x = \"Lizard Length from Snout to Vent (mm)\", \n       y = 'Weight (g)', \n       title = \"Lizard Weight as a Function of Snout to Vent Length\")\n\n\n\n\nPart 3: Male Western Whiptail lizards NLS\n\n\n# filter for male western whiptails\nwhiptails <- lizards %>% \n  filter(sex ==\"M\", spp ==\"CNTI\")\n#estimate coefficients\nwhiptails_coeff <- whiptails %>% \n  mutate(log_weight = log(weight)) %>% \n  mutate(log_length = log(sv_length))\n\n# linear regression model \nwhiptails_estimate <- lm(log_weight ~ log_length, data = whiptails)\n\nwhiptails_coeff <- coef(whiptails_estimate)\n#create NLS \nwhiptails_nls <- nls(weight ~ lizard_model(a, sv_length, b),\n                     data = whiptails,\n                     start = list(b= whiptails_coeff[2],\n                                  a = exp(whiptails_coeff[1])))\n\n#tidy table\nwhiptails_tidy <- tidy(whiptails_nls)\n\n#create finalized table \nwhiptails_tidy %>% \n  kable(col.names = c(\"Terms\",\n                      \"Coefficients\",\n                      \"Standard Error\",\n                      \"Statistic\",\n                      \"P-Value\"), digits = 5) %>% \n  kable_classic(full_width = F)\n\n\n\nTerms\n\n\nCoefficients\n\n\nStandard Error\n\n\nStatistic\n\n\nP-Value\n\n\nb\n\n\n2.36830\n\n\n0.18003\n\n\n13.15469\n\n\n0.00000\n\n\na\n\n\n0.00053\n\n\n0.00043\n\n\n1.23969\n\n\n0.21923\n\n\n#calculate RMSE for whiptails and compare with lizards data\nwhiptails_rmse <- rmse(whiptails_nls, data = whiptails)\nall_rmse <- rmse(lizard_nls, data = whiptails)\n\n\n\n\n\n#augment the data\nwhiptails_prediction <- augment(whiptails_nls)\n\n#create ggplot\nggplot(data =whiptails,\n       aes(x =sv_length,\n           y = weight,\n           color = sex))+\n  geom_jitter(size = 1)+\n  scale_color_manual(values = c('darkslategrey','grey58', \"red\")) +\n  #include nls line\n  geom_line(data =whiptails_prediction,\n            aes(x = sv_length,\n                y = .fitted,\n                color = \"Whiptails NLS\")) +\n  #include NLS line from original data\n  geom_line(data = model_prediction,\n            aes(x= sv_length,\n                y = .fitted,\n                color = \"Original NLS\")) +\n  theme_minimal()+\n  labs(x = \"Whiptail Length (mm)\", \n       y = 'Weight (g)' ) +\n  ggtitle(\"Length and Weight of Male Whiptail Lizards with NLS from Whiptails and Original Data\")\n\n\n\n\nCaption “The plot above shows the comparison of lizard length from snout to vent and weight of male Whiptail lizards. The grey line shows the NLS model fitted for the entire lizard dataset, and the red line shows the NLS model for Whiptail lizards only. The RMSE for the original lizards data is 3.5622, and the RMSE of the male whiptails is 3.3493. We would prefer to use the lizard RMSE because it is a lower value overall, so it does a better job of fitting the data to the model.\nData Citation: Lightfoot, D. and W.G. Whitford. 2020. Lizard pitfall trap data from 11 NPP study locations at the Jornada Basin LTER site, 1989-2006 ver 37. Environmental Data Initiative. https://doi.org/10.6073/pasta/4a6e258fb49c31e222ecbbcfd128967f\n\n\n\n",
    "preview": "posts/2022-03-12-project3/project3_files/figure-html5/unnamed-chunk-6-1.png",
    "last_modified": "2022-03-12T19:32:02-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-03-12-project4/",
    "title": "Data Visualization for Mono Lake Levels",
    "description": "A beautiful data visualization of Mono Lake levels.",
    "author": [
      {
        "name": "Ali Martin",
        "url": {}
      }
    ],
    "date": "2022-03-12",
    "categories": [],
    "contents": "\nMono Lake Levels\n\n\nhide\n\n#plot basic graph\n ggplot(data = mono_lake_levels, aes(x = year, y = lake_level_feet_above_sea_level)) +\n  labs (x = \"Year\" ,\n  y = \"Lake level (feet above sea level)\" , \n  title = \"Mono Lake Levels from 1850 to 2017\") +\n  geom_line(color = \"aquamarine2\",\n            size =1 ) +\n  #add fancy stuff like ribbon plots to fill in the plot\ngeom_ribbon(aes(ymin = 6355,\n                ymax = lake_level_feet_above_sea_level),\n            alpha = 0.4,\n            fill = \"powderblue\") +\n  theme_minimal() +\n\n#change background and margin color\ntheme(panel.background = element_rect(fill = \"azure1\"),\npanel.border = element_rect(fill = NA),\nplot.background = element_rect(fill = \"ivory\"),\n      \n\n#change border width\nplot.margin = margin(t = 0.6,\n                     r = 0.6,\n                     b = 0.6,\n                     l = 0.6,\n                     unit = \"cm\"),\n\nplot.title = element_text (face = \"bold\",\n                           hjust = 0.5,\n                           size = 15,\n                           color = \"grey30\")) + \n  scale_x_continuous(limits = c(1850, 2017), \n                     expand = c(0,0),\n                     breaks = seq(1850, 2017, by=25)) +\n  scale_y_continuous(limits = c(6355,6440), \n                     expand = c(0,0),\n                     breaks = seq(6350,6430, by=20)) +\n  annotate(\"text\", \n           label = \"1941:\\n LA begins diverting water\", \n           y = 6430, \n           x = 1939,\n           hjust = 0,\n           size = 3.5,\n           color = \"indianred3\") +\n  \n  geom_line (aes(y = 6360),\n             color = \"indianred3\",\n             alpha = 1,\n             linetype = \"dotted\") +\n  \n  annotate(\"text\",\n           label = \"6,377 ft: Land bridges emerge between mainland and islands\",\n           x = 1852,\n           y = 6375,\n           color = \"orangered1\",\n           size = 3,\n           hjust = 0) +\n  geom_line(aes(y = 6377),\n            color = \"indianred3\",\n            alpha = 1,\n            linetype = \"dotted\") +\n  annotate(\"text\",\n           label = \"6360 ft: bird populations threatened\",\n           x = 1852,\n           y = 6358,\n           color = \"orangered1\",\n           size = 3,\n           hjust = 0 ) +\n   geom_segment(aes(x = 1941, \n                   xend = 1941,\n                   y = 6419, \n                   yend = 6426),\n               color = \"indianred4\",\n               arrow = arrow(ends = \"first\",\n                             type = \"open\",\n                             length = unit(0.15,\"cm\")\n                             ))\n\n\n\n\nFigure Caption: The above graph shows the annual lake levels of Mono Lake, California from the years 1850 to 2017 (Mono Basin Clearinghouse). The graph also highlights important historical events (labeled in red) surrounding the lake.\n\n\n\n",
    "preview": "posts/2022-03-12-project4/project4_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2022-03-12T19:47:52-08:00",
    "input_file": "project4.knit.md"
  },
  {
    "path": "posts/2022-02-25-portfolio/",
    "title": "Project 2",
    "description": "One of the projects I've completed using R programming language.",
    "author": [
      {
        "name": "Ali Martin",
        "url": "https://github.com/aomartin923/esm244_a2_task2"
      }
    ],
    "date": "2022-02-25",
    "categories": [],
    "contents": "\nOverview:\nUsing data from the Environmental Data Initiative repository: “The Sierra Lakes Inventory Project (SLIP)”, I created two graphs to explore the abundance of amphibians within all water bodies such as lakes, ponds, and marshes. My first graph shows the total number of mountain yellow-legged frogs each year across all water bodies. My second graph shows a column graph containing total counts of adult and sub-adult frogs observed in the top 5 lakes with the most counts.\n\n\nhide\n\nknitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE )\n\nlibrary(tidyverse)\nlibrary(here)\nlibrary(lubridate)\nlibrary(janitor)\n\n\n\n\n\nhide\n\n# Read in the amphibians data\namphibians <- read_csv(here('data','sierra_amphibians.csv'))%>% clean_names()\n\n\n\nPart 1: Total Rana Muscosa Count by Year and Life Stage\n\n\nhide\n\n#filter to only include rana muscosa and remove egg mass \nrana_muscosa <- amphibians %>% \n  filter(amphibian_species == \"RAMU\", amphibian_life_stage != \"EggMass\") %>% \n  #change the date\n  mutate(survey_date = mdy(survey_date)) %>% \n  #add new column year\n  mutate(year = year(survey_date))\n\n\n\n\n\nhide\n\n#plot the graph \nrana_muscosa %>% \n  group_by(year, amphibian_life_stage) %>% #group by year and life stage\n  summarize(amphibian_count = n()) %>%\n  ggplot(aes(x = as.factor(year), y = amphibian_count)) + \n  geom_bar(aes(fill = amphibian_life_stage), stat = \"identity\") +\n    labs(x = \"Year\",\n         y = \" Total Frog Count by Life Stage\", fill = \"Life Stage\") + \n  ggtitle(\"Number of frogs (rana muscosa) within each life stage from 1995-2002\")\n\n\n\n\nPart 2: Total Sub-Adult and Adult Rana Muscosa Frogs\n\n\nhide\n\n#reformat lake id \nrana_muscosa$lake_id <-sub(\"^\",\"Lake \",rana_muscosa$lake_id)\n\n\n\n\n\nhide\n\n#Wrangle the data a bit\ntotal_adult_amphibians <- rana_muscosa %>% \n  filter(amphibian_life_stage !=\"Tadpole\") %>% \ngroup_by (lake_id) %>% \n  summarize(total_adult_amphibians = sum(amphibian_number, na.rm = TRUE)) %>% \nslice_max(total_adult_amphibians, n = 5)\n\n\n\n\n\nhide\n\n# Plot the graph\ntotal_adult_amphibians %>% \nmutate(lake_id = fct_reorder(lake_id, total_adult_amphibians)) %>% \nggplot ( aes (x =total_adult_amphibians, \n            y = lake_id, label = total_adult_amphibians)) +\n  geom_col(na.rm = FALSE, color = \"khaki4\", fill= \"gold2\") +\n  theme_bw() + \n  labs( x = \"Total Adult Frogs per Site\", y = \"Lake Site\" , title = \"Total Adult Mountain Yellow-Legged Frogs in 5 Lakes\")\n\n\n\n\nData Citation: Knapp, R.A., C. Pavelka, E.E. Hegeman, and T.C. Smith. 2020. The Sierra Lakes Inventory Project: Non-Native fish and community composition of lakes and ponds in the Sierra Nevada, California ver 2. Environmental Data Initiative. https://doi.org/10.6073/pasta/d835832d7fd00d9e4466e44eea87fab3\n\n\n\n",
    "preview": "posts/2022-02-25-portfolio/portfolio_files/figure-html5/unnamed-chunk-3-1.png",
    "last_modified": "2022-03-11T14:37:13-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-01-21-welcome/",
    "title": "Time Analysis of Salmon at Willamette Fish Ladder",
    "description": "One of my projects using R programming",
    "author": [
      {
        "name": "Ali Martin",
        "url": {}
      }
    ],
    "date": "2022-02-06",
    "categories": [],
    "contents": "\n\n\nhide\n\nknitr::include_graphics(\"salmon.jpeg\")\n\n\n\n\nPhoto 1: Columbia River Salmon Run, photo courtesy of: U.S Fish and Wildlife\n\n\nhide\n\nknitr::include_graphics(\"fish_ladder.jpeg\")\n\n\n\n\nPhoto 2 Map of Willamette Fish Ladder, courtesy of US Army Corps of Engineers, Portland District\nOverview:\nThis analysis examines the patterns and seasonality of the passages of 3 salmon species: Steelhead, Coho, and Jack Coho in the Willamette Falls fish ladder location in Oregon.\nThe overall data includes the dates from 2001-01-01 to 2010-12-31, and shows the record of passages for each fish in the river. We decided to focus on three salmon species (Steelhead, Jack Coho, and Coho) to analyze time series patterns. We first explored the pattern of the passages for each observed species using an original time series, next we created a season plot to explore any seasonality within each species’ passages, and finally we included the total annual passage counts for each salmon species observed.\nData Source: Columbia River DART (Data Access in Real Time), 2010. Data Courtesy of U.S. Army Corps of Engineers, NWD and Chelan, Douglas, and Grant County PUDs, Yakima Klickitat Fisheries Project, Colville Tribes Fish & Wildlife (OBMEP), Oregon Department of Fish & Wildlife, Washington Department of Fish & Wildlife.\nAnalysis:\nOriginal Time Series\n\n\nhide\n\nwillamette_fish <- read_csv(here('data','willamette_fish_passage.csv')) %>%\n  clean_names() # read in the data\n\n## make subset of just steelhead, coho, and jack coho\nwillamette_salmon= subset(willamette_fish, select= c(date, steelhead, coho, jack_coho))\n\n## replace NA's with 0 \nsalmon_tidy <- willamette_salmon %>% \n  replace(is.na(.), 0) \n\n\n\n\n\nhide\n\n## exploratory ggplot to see any patterns\nggplot(data = salmon_tidy, aes(x = date, y = steelhead)) +\n  geom_line()\n\n\n\n\n\nhide\n\n## convert to tsibble so it can be a time frame\nsalmon_ts <- salmon_tidy %>% \n  mutate(date = lubridate::mdy(date)) %>% \n  as_tsibble(key = NULL, index = date) %>% \n\n## use pivot longer to make all fish in one column\npivot_longer(cols = c(coho, jack_coho, steelhead),\n               names_to = 'salmon_species',\n               values_to = 'salmon_count') %>% \n# change names so it looks nicer\n  mutate(salmon_species = case_when(salmon_species == 'coho' ~ 'Coho',\n                                 salmon_species == 'jack_coho' ~ 'Jack Coho',\n                                 salmon_species == 'steelhead' ~ 'Steelhead'))\n\n## plot the data \nggplot(data = salmon_ts, aes(x = date, y = salmon_count)) +\n  geom_line(aes(color = salmon_species)) +\n  scale_color_manual(\"Species\",values = c(\"salmon\",\"pink1\",\"palevioletred4\")) +\n  labs(x = \"Date (years)\" , \n       y =\"Salmon Passage Counts\", \n       caption = \" The figure shows passages through time (years) for three types of salmon: Steelhead, Coho, and Jack Coho.\") +\n  ggtitle(\"Figure 1: Time Series Analysis of 3 Salmon Species\")\n\n\n\n\nTime Series Analysis:\nFrom looking at Figure 1, the following trends/patterns show:\nThere are more passages toward the middle of the year for Steelhead salmon, and there are more passages toward the end of the year for Coho Salmon.\nSteelhead salmon have the highest peak passages from 2001 to 2008. From 2008 to 2011, Coho Salmon have the highest peak passages\nJack Coho have the smallest peak passages, but their passage patterns are more similar to Coho than Steelhead\nSeason Plot\n\n\nhide\n\n#create seasonality plot for each salmon\nsalmon_ts %>% \n  gg_season(y = salmon_count) +\n  labs(x = \"Month\", \n       y = \"Salmon Passage\",\n       caption= \"This graph shows the seasonality distribution between 3 salmon species: Coho, Jack Coho, and Steelhead\") +\n  ggtitle(\"Figure 2: Season Plot of 3 Salmon Species \")\n\n\n\n\nSeason Plot Analysis:\nFrom this graph, several patterns and trends show:\nSteelhead Salmon have the most widely distributed seasonality, from January to the end of September\nCoho and Jack Coho passage seasonality peak at around September to October\nThe year of peak passage for Coho Salmon is 2010, while peak passage for Jack Coho occurred in 2008, and peak passage for Steelhead occured in 2004\nAnnual Counts by Species\n\n\nhide\n\nsalmon_counts <- salmon_tidy %>% \nmutate(date = lubridate::mdy(date)) %>% #change dates\nmutate(year = year(date)) %>% #create year column\n  pivot_longer(cols = c(coho, jack_coho,steelhead),#create a column for all species and counts\n               names_to = 'salmon_species',\n               values_to = 'passage_count') %>% \nmutate(salmon_species =case_when( #change names to a nicer format\n  salmon_species == 'coho' ~ 'Coho',\n  salmon_species == 'jack_coho' ~ 'Jack Coho',\n  salmon_species == 'steelhead' ~ 'Steelhead')) %>% \ngroup_by(year, salmon_species) %>% #group by year and salmon species to get counts for each species\nsummarize(yearly_count =sum(passage_count)) #count sum of passages by year\n\n\n\n\n\nhide\n\n#plot the results!\nggplot(data = salmon_counts, aes (x = year, y = yearly_count)) +\n  geom_line(aes(x = year, y = yearly_count, color = salmon_species)) +\n  scale_color_manual(\"Species\",values = c(\"salmon\",\"pink1\",\"palevioletred4\")) +\n  scale_x_continuous(breaks = c(2001, 2003, 2005, 2007, 2010)) +\n  labs(x = \"Year\", \n       y = \"Salmon Counts\",\n       caption = \"This plot shows annual counts for 3 salmon species from 2001 to 2010 at Willamette Falls location\") +\n  ggtitle(\"Figure 3: Annual Counts for 3 Salmon Species at Willamette Falls, OR\")\n\n\n\n\nAnnual Counts Analysis\nFrom Figure 3, certain trends and patterns show:\nJack Coho counts had the least variability throughout time\nSteelhead salmon had the highest counts overall except for 2009 when Coho had the highest counts\n\n\n\n",
    "preview": "posts/2022-01-21-welcome/salmon.jpeg",
    "last_modified": "2022-03-12T18:34:13-08:00",
    "input_file": {}
  }
]
